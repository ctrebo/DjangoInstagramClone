{% extends "base_generic.html" %}

{% block content %}
<div class="row postition-relative border" id="row-create-comment">
    <div class="col-12 col-md-7 px-0">
        <section class="d-block d-md-none">
            <header class="px-3 p-075 border-comments"">
                <article>
                    <img class="post-pp"  src="{{post.author.prof_pic.url}}" alt="alt">
                    <span class="ml-2 font-size-username">
                        <b>{{post.author.username}}</b>
                    </span>
                </article>
            </header>
        </section>
        <section>                
            <article>
                <img class="w-100 h-auto"  src="{{post.picture.url}}" alt="alt">
            </article>
        </section>
    </div>
    <div class="col-md-5 col-12 px-0">
        <section class="d-none d-md-block">
            <header class="px-3 p-075 border-comments" id="header-create-comment">
                <article>
                    <img class="post-pp"  src="{{post.author.prof_pic.url}}" alt="alt">
                    <span class="ml-2 font-size-username">
                        <b><a class="text-dark" href="{% url 'user-detail' post.author.pk %}">{{post.author.username}}</a></b>
                    </span>
                </article>
            </header>
        </section>
        <section id="comment-section" class="d-none d-md-block w-100 border-add-comment position-absolute">
            <article class="overflow-comments">
                {% for comment in comment_list %}
                    <section class="px-3 pt-3 d-none d-md-block">
                        <article>
                            <img class="post-pp"  src="{{comment.author.prof_pic.url}}" alt="alt">
                            <span class="ml-3 font-size-username">
                                <b><a class="text-dark" href="{% url 'user-detail' comment.author.pk %}">{{comment.author.username}}</a></b><span>&nbsp</span><span>{% for word in comment.description_to_array %} {% if "@" in word %} <a href="{% comment %} insert here link to user-detail page {% endcomment %}">{{word}}  </a> {% else %}{{word}} {% endif %}{% endfor %}</span>
                            </span>
                            <p class="time-ago ml-5 mb-0">{{comment.time_commented_ago}}</p>
                        </article>
                    </section>
                {% empty %}
                    <p class="p-3">No comments</p> 
                {% endfor %}
            
            </article>
        </section>
        <section class="px-3 d-none d-md-block">
            <article>
                <form action="" method="post" class="">
                    {% csrf_token %}
                    <table class="table-form w-75">
                    {{ form.as_table }}
                    </table>
                    <input id="submit-comment" type="submit" class="btn text-info submit-comment" value="Submit" />
                </form>
            </article>
        </section>
        <section class="px-3 d-block d-md-none">
            <article>
                <form action="" method="post" class="">
                    {% csrf_token %}
                    <table>
                        {{ form.as_table }}
                    </table>
                    <input type="submit" class="btn text-info submit w-25 bg-white" value="Submit" />
                </form>
            </article>
        </section>

    </div>
</div>
<hr class="my-5">
<div>
    <section>
        <article>
            <div>
                <p class="more-posts-of mb-3">Other posts from <b>{{post.author.username}}</b></p>
            </div>
        </article>
    </section>
</div>
<div class="row">
{% for post in other_posts_of_author %}
    <div class="col-4 p-15px mb-for-user-detail position-relative">
        <div class="img-user-detail">
            <img src="{{post.picture.url}}" alt="">
            <div onclick="location.href='{% url 'create-comment' post.pk %}';" class="hover h-100 w-100 mx-auto">
                <p class="px-3 center-comment-symbol"
                    href="{% url 'create-comment' post.pk %}"><i class="fa fa-15 fa-comment"></i> {{post.postcomment_set.count}}</p>
            </div>
        </div>
    </div>
{% endfor %}
</div>
{% endblock %}